<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>California DMV Quick Test</title>
<meta name="description" content="California DMV Quick Test – One question at a time with instant explanations.">
<style>
  :root {
    --primary: #1976D2;
    --accent: #FF7A00;
    --bg: #F6F8FB;
    --text: #111827;
    --muted: #6B7280;
    --ok: #16A34A;
    --bad: #EF4444;
    --border: #E5E7EB;
  }
  * { box-sizing: border-box; }
  body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background: var(--bg); color: var(--text); }
  .wrap { max-width: 760px; margin: 24px auto; padding: 16px; }
  .card { background: #fff; border: 1px solid var(--border); border-radius: 16px; padding: 22px; box-shadow: 0 8px 30px rgba(0,0,0,.05); }
  h1 { margin: 0 0 8px; font-size: clamp(22px, 3.2vw, 28px); }
  .sub { color: var(--muted); margin: 0 0 14px; font-size: 14px; }
  .progress { font-weight: 700; color:#0f172a; margin: 8px 0 10px; }
  .bar { width: 100%; height: 8px; background:#f3f4f6; border-radius: 999px; overflow: hidden; }
  .bar > div { height: 100%; background: var(--primary); width: 0%; transition: width .25s ease; }
  .q { font-size: 18px; font-weight: 700; margin: 14px 0 10px; }
  .choice { display:block; width:100%; text-align:left; padding:12px 14px; margin:8px 0; border:1px solid var(--border); border-radius:12px; background:#fff; cursor:pointer; line-height:1.4; }
  .choice:hover { background:#F9FAFB; }
  .choice.correct { border-color: var(--ok); background:#ECFDF5; }
  .choice.incorrect { border-color: var(--bad); background:#FEF2F2; }
  .ex { display:none; margin-top: 12px; padding:12px; background:#F0F9FF; border-left:4px solid var(--primary); border-radius:8px; }
  .controls { display:flex; gap:10px; margin-top:16px; }
  .btn { padding:11px 16px; border:0; border-radius:12px; font-weight:800; cursor:pointer; }
  .btn-next { background: var(--accent); color:#fff; box-shadow: 0 10px 28px rgba(255,122,0,.25); }
  .btn-reset { background:#EEF2FF; color:#3730A3; }
  @media (max-width: 640px) {
    .btn { width: 100%; }
    .controls { flex-direction: column; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>California DMV Quick Test</h1>
      <p class="sub">One question at a time · Instant explanations · Updated for 2025</p>
      <div class="progress" id="progress">Question 1</div>
      <div class="bar"><div id="bar"></div></div>
      <div class="q" id="qtext"></div>
      <div id="choices"></div>
      <div class="ex" id="ex"></div>
      <div class="controls">
        <button class="btn btn-next" onclick="next()">Next Question</button>
        <button class="btn btn-reset" onclick="reset()">Restart Test</button>
      </div>
    </div>
  </div>

<script>
  const DATA = [{"q": "1. When approaching an intersection with a flashing yellow light, you should:", "options": ["Stop completely before proceeding", "Slow down and proceed with caution", "Accelerate quickly to clear the intersection"], "correct": 1, "expl": "A flashing yellow light means slow down and proceed carefully, yielding to any traffic or pedestrians."}, {"q": "2. What is the legal BAC limit for drivers 21 and older in California?", "options": ["0.10%", "0.08%", "0.05%"], "correct": 1, "expl": "The legal limit for drivers 21 and over is 0.08% BAC."}, {"q": "3. When parking downhill with a curb, turn your front wheels:", "options": ["Toward the curb", "Away from the curb", "Straight ahead"], "correct": 0, "expl": "Turning the wheels toward the curb prevents the vehicle from rolling into traffic if brakes fail."}, {"q": "4. A red arrow traffic signal means:", "options": ["Stop, then turn when safe", "Do not turn in that direction until the light turns green", "Turn cautiously after yielding"], "correct": 1, "expl": "A red arrow means no turning in that direction until the signal changes."}, {"q": "5. What does a solid white line between lanes mean?", "options": ["Lane changes are discouraged", "Lane changes are prohibited", "You must change lanes immediately"], "correct": 0, "expl": "A solid white line discourages lane changes but does not fully prohibit them."}, {"q": "6. If you are being tailgated, you should:", "options": ["Slow down gradually and encourage passing", "Brake suddenly to warn the driver", "Speed up to create distance"], "correct": 0, "expl": "Gradually slowing down gives the tailgater space to pass safely."}, {"q": "7. When must you use your headlights?", "options": ["Anytime visibility is less than 1,000 feet", "Only at night", "Only during rain"], "correct": 0, "expl": "Headlights are required when visibility is poor, including darkness, fog, or heavy rain."}, {"q": "8. If your accelerator sticks, you should:", "options": ["Shift to neutral and apply brakes", "Turn the ignition off immediately", "Pump the gas pedal repeatedly"], "correct": 0, "expl": "Shifting to neutral disconnects power so you can safely slow down and stop."}, {"q": "9. You must stop for a school bus when:", "options": ["It is stopped with flashing red lights", "It is slowing down", "Children are nearby"], "correct": 0, "expl": "California law requires all drivers to stop for a school bus with flashing red lights, unless on a divided highway."}, {"q": "10. When two vehicles arrive at an intersection at the same time, the right-of-way goes to:", "options": ["The driver on the right", "The driver on the left", "The faster vehicle"], "correct": 0, "expl": "The vehicle to the right has the right-of-way at the same-time arrival."}, {"q": "11. A white painted curb means:", "options": ["Passenger loading only", "No stopping at any time", "Loading zone for freight"], "correct": 0, "expl": "A white curb allows brief stops for passengers to get in or out."}, {"q": "12. On a wet road, you should:", "options": ["Drive at the posted speed limit", "Reduce speed", "Speed up to avoid hydroplaning"], "correct": 1, "expl": "Reducing speed lowers the risk of losing control."}, {"q": "13. A pentagon-shaped sign means:", "options": ["School zone or school crossing", "Pedestrian crossing", "Playground area"], "correct": 0, "expl": "Five-sided signs warn of a school zone or school crossing ahead."}, {"q": "14. When driving at night, you should dim high beams within:", "options": ["300 feet of another vehicle", "500 feet of an oncoming vehicle", "200 feet of another vehicle"], "correct": 1, "expl": "High beams must be dimmed within 500 feet to avoid blinding other drivers."}, {"q": "15. When a traffic signal turns green, you should:", "options": ["Move immediately", "Look left and right before proceeding", "Honk before entering"], "correct": 1, "expl": "Even with a green light, check for crossing traffic and pedestrians before moving."}, {"q": "16. Which statement is true about seat belts?", "options": ["They reduce injury in most collisions", "They trap you in a crash", "They are optional for short trips"], "correct": 0, "expl": "Seat belts greatly reduce the risk of serious injury in most accidents."}, {"q": "17. When entering a freeway, you should:", "options": ["Stop at the end of the ramp", "Match the speed of traffic", "Enter at any speed you choose"], "correct": 1, "expl": "Matching freeway speed ensures a smoother and safer merge."}, {"q": "18. A yellow curb means:", "options": ["Passenger loading only", "Loading zone for freight or passengers", "No stopping"], "correct": 1, "expl": "Yellow curbs allow loading and unloading of passengers or freight during posted hours."}, {"q": "19. At an uncontrolled intersection, you must yield to:", "options": ["Vehicles on your left", "Vehicles on your right", "Vehicles going straight"], "correct": 1, "expl": "At intersections without signs, yield to vehicles on your right."}, {"q": "20. What does a red painted curb mean?", "options": ["No stopping, standing, or parking", "Passenger loading only", "Freight loading zone"], "correct": 0, "expl": "Red curbs mean stopping or parking is not allowed, except for buses where posted."}, {"q": "21. If your brakes fail while driving, you should:", "options": ["Shift to a lower gear and use the parking brake", "Turn off the engine immediately", "Pump the brakes once"], "correct": 0, "expl": "Downshifting and applying the parking brake helps you stop safely."}, {"q": "22. When driving in fog, you should:", "options": ["Use low-beam headlights", "Use high-beam headlights", "Drive with parking lights only"], "correct": 0, "expl": "Low beams reduce glare and improve visibility in fog."}, {"q": "23. When passing a bicyclist, you must leave at least:", "options": ["1 foot", "3 feet", "2 feet"], "correct": 1, "expl": "California law requires a minimum of 3 feet when passing a bicycle."}, {"q": "24. Which road surface is most slippery?", "options": ["Just after it starts to rain", "After several hours of rain", "During heavy rain"], "correct": 0, "expl": "Oil and dirt mix with the first rain, making roads extra slippery."}, {"q": "25. If you miss your exit on the freeway, you should:", "options": ["Back up carefully to the exit", "Continue to the next exit", "Stop and turn around"], "correct": 1, "expl": "Backing up on a freeway is illegal and dangerous — always go to the next exit."}];
  const KEY = 'dpt_' + (document.title || 'test') + '_idx';
  const isMobile = /Mobi|Android/i.test(navigator.userAgent) || window.matchMedia('(max-width: 768px)').matches;

  function getIndex() {
    const v = parseInt(localStorage.getItem(KEY) || '0', 10);
    return isNaN(v) ? 0 : Math.max(0, Math.min(v, DATA.length - 1));
  }
  function setIndex(i) { localStorage.setItem(KEY, String(i)); }

  function setBar(i) {
    const pct = ((i+1) / DATA.length) * 100;
    document.getElementById('bar').style.width = pct + '%';
  }

  function render() {
    const i = getIndex();
    const q = DATA[i];
    document.getElementById('progress').textContent = `Question ${i+1} of ${DATA.length}`;
    setBar(i);
    document.getElementById('qtext').textContent = q.q;
    const list = document.getElementById('choices');
    list.innerHTML = '';
    q.options.forEach((t, idx) => {
      const btn = document.createElement('button');
      btn.className = 'choice';
      btn.innerHTML = `<strong>${String.fromCharCode(65+idx)}.</strong> ${t}`;
      btn.addEventListener('click', () => select(idx, q.correct, q.expl));
      list.appendChild(btn);
    });
    const ex = document.getElementById('ex');
    ex.style.display = 'none';
    ex.textContent = '';
  }

  function select(idx, correct, expl) {
    document.querySelectorAll('.choice').forEach(el => el.onclick = null);
    const nodes = document.querySelectorAll('.choice');
    nodes.forEach((n, i) => {
      if (i === correct) n.classList.add('correct');
      if (i === idx && idx !== correct) n.classList.add('incorrect');
    });
    const ex = document.getElementById('ex');
    ex.textContent = 'Explanation: ' + (expl || 'See handbook guidance for details.');
    ex.style.display = 'block';
  }

  function next() {
    let i = getIndex();
    if (i < DATA.length - 1) {
      i += 1;
      setIndex(i);
      if (isMobile) { location.reload(); } else { render(); }
    } else {
      alert('You finished this practice test!');
      setIndex(0);
      if (isMobile) location.reload(); else render();
    }
  }
  function reset() { setIndex(0); if (isMobile) location.reload(); else render(); }

  window.addEventListener('DOMContentLoaded', () => { render(); });
</script>
</body>
</html>